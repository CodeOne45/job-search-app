{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","console","log","JobSearch","searchFormSelector","resultsContainerSelector","searchForm","document","querySelector","resultsContainer","fetch","then","results","json","countryCode","toLowerCase","setCurrencySymbol","catch","currencySymbol","addEventListener","event","preventDefault","search","response","map","join","jobs","innerHTML","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\n<div class=\"card\">\n  <div class=\"card-body\">\n  <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\n  <h5>${job.location.display_name}</h5>\n  <p class=\"card-text\">${job.description}</p>\n  <a href=\"${job.redirect_url}\">View Job</a>\n  </div>\n</div>\n`;","export const extractFormData = form => Array\n    .from(form.elements)\n    .reduce((acc, { id, value }) => ({ [id]: value, ...acc }), {});\n\nexport const getCurrencySymbol = country => {\n    const currencies = {\n        gb: 'Â£',\n        us: '$',\n        au: '$',\n        ca: '$',\n    };\n    console.log(currencies[country]);\n    return currencies[country];\n}","import { jobTemplate } from './templates';\nimport { extractFormData, getCurrencySymbol } from './utils';\n\n\nexport class JobSearch {\n  constructor(searchFormSelector, resultsContainerSelector) {\n    this.searchForm = document.querySelector(searchFormSelector);\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\n  }\n\n  setCountryCode() {\n    fetch('http://ip-api.com/json')\n      .then(results => results.json())\n      .then(results => {\n        this.countryCode = results.countryCode.toLowerCase();\n        this.setCurrencySymbol();\n      })\n      .catch(() => this.countryCode = 'us');\n  }\n\n  setCurrencySymbol() {\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\n  }\n\n  configureFormListener() {\n    this.searchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const { search, location } = extractFormData(this.searchForm);\n    fetch(`http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`)\n      .then(response => response.json())\n      .then(({ results }) => {\n        console.log(results);\n        return results\n          .map(job => jobTemplate(job, this.currencySymbol))\n          .join('');\n      })\n      .then(jobs => this.resultsContainer.innerHTML = jobs);\n    });\n  }\n}\n\n","import { JobSearch } from './JobSearch';\n\nconst jobSearch = new JobSearch('#search-form', '.result-container');\njobSearch.setCountryCode();\njobSearch.configureFormListener();\n"]}